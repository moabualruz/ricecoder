# Migration Guide: v0.1.7 to v0.1.8

This guide covers the migration from RiceCoder v0.1.7 to v0.1.8, which includes Phase 8 fixes and production readiness improvements.

## Overview

**Release Date**: December 16, 2025
**Breaking Changes**: None
**Migration Time**: 5-10 minutes
**Downtime Required**: None

## What's New in v0.1.8

### Phase 8: Published Issues Fixes

- **TUI Event Loop**: Fixed event polling implementation
- **Configuration System**: Improved first-run setup and config loading
- **Provider Standards**: Fixed Zen provider URL and model discovery
- **Path Resolution**: Unified path handling across commands
- **Default to TUI**: `rice` command now defaults to TUI interface
- **Non-Interactive Init**: Support for CI/CD initialization
- **Provider Registry**: Unified provider management
- **Config Command**: Actual config loading and saving
- **Error Handling**: Robust error recovery
- **Graceful Shutdown**: Terminal state restoration
- **Code Reusability**: Centralized utilities

### Configuration-Driven Architecture

- Maximum code reusability and feature configurability
- Improved error handling and recovery
- Better CI/CD integration support

## Migration Steps

### 1. Backup (Recommended)

```bash
# Backup global configuration
cp -r ~/.ricecoder ~/.ricecoder.backup.v0.1.7

# Backup project configurations
cp -r .agent .agent.backup.v0.1.7
```

### 2. Update RiceCoder

Choose your update method:

#### Cargo
```bash
cargo install ricecoder --force
```

#### Installation Script
```bash
# Linux/macOS
curl -fsSL https://raw.githubusercontent.com/moabualruz/ricecoder/main/scripts/install | bash

# Windows PowerShell
irm https://raw.githubusercontent.com/moabualruz/ricecoder/main/scripts/install.ps1 | iex
```

#### Homebrew
```bash
brew update
brew upgrade ricecoder
```

### 3. Verify Installation

```bash
rice --version
# Should show: ricecoder 0.1.8
```

### 4. Test Basic Functionality

```bash
# Test TUI (now default)
rice

# Test CLI commands
rice --help
rice init --dry-run
```

### 5. Update Project Configurations

```bash
# Reinitialize project (safe, preserves existing config)
rice init

# Or update existing configuration
rice config update
```

## Configuration Changes

### Provider Configuration

No changes required. Existing provider configurations are fully compatible.

### Project Configuration

The `.agent/ricecoder.toml` format remains unchanged. However, the system now handles configuration loading more robustly.

### Global Configuration

Global configuration in `~/.ricecoder/` is backward compatible.

## New Features to Test

### 1. Default TUI Interface

```bash
# Now starts TUI by default
rice

# Use --cli for command-line mode
rice --cli --help
```

### 2. Non-Interactive Initialization

```bash
# For CI/CD environments
rice init --non-interactive --project-type rust

# Skip prompts
rice init --yes
```

### 3. Improved Error Handling

The system now provides better error messages and recovery options.

### 4. Graceful Shutdown

Terminal state is properly restored when exiting RiceCoder.

## Troubleshooting

### "Configuration loading failed"

**Solution**:
```bash
# Reset configuration
rice config reset

# Reinitialize
rice init
```

### "Provider connection failed"

**Solution**:
```bash
# Test provider connection
rice provider test

# Reconfigure if needed
rice config provider <provider> --reconfigure
```

### "TUI not starting"

**Solution**:
```bash
# Check terminal capabilities
rice --cli version

# Force CLI mode
rice --cli
```

## Rollback (if needed)

If you need to rollback to v0.1.7:

```bash
# Install specific version
cargo install ricecoder --version 0.1.7

# Restore backup configurations
cp -r ~/.ricecoder.backup.v0.1.7 ~/.ricecoder
cp -r .agent.backup.v0.1.7 .agent
```

## Performance Improvements

v0.1.8 includes performance optimizations:

- Faster configuration loading
- Improved TUI responsiveness
- Better memory usage
- Optimized provider switching

## Security Enhancements

- Enhanced input validation
- Improved error handling to prevent information leakage
- Better secure configuration handling

## Testing Your Migration

Run these tests to ensure everything works:

```bash
# Basic functionality
rice --version
rice --help

# Configuration
rice config list
rice config validate

# Provider testing
rice provider list
rice provider test

# Project operations
rice init --dry-run
rice analyze --dry-run

# TUI testing
timeout 5 rice || echo "TUI started successfully"
```

## Support

### Getting Help

- **Migration Issues**: [GitHub Issues](https://github.com/moabualruz/ricecoder/issues) with `migration` label
- **Documentation**: [Migration Guide](README.md)
- **Community**: [GitHub Discussions](https://github.com/moabualruz/ricecoder/discussions)

### Enterprise Support

Enterprise customers get priority migration support:
- Migration planning consultation
- Dedicated migration assistance
- Rollback support during migration window

## Next Steps

After successful migration:

1. **Explore new features** in the TUI interface
2. **Update CI/CD pipelines** to use `--non-interactive` flag
3. **Review configurations** for any deprecated settings
4. **Test enterprise features** if applicable

## Changelog Summary

See [CHANGELOG.md](../../CHANGELOG.md) for complete v0.1.8 changes.

**Key Improvements**:
- Fixed 11 published issues from v0.1.7
- Configuration-driven architecture implementation
- Enhanced error handling and recovery
- Improved CI/CD integration
- Better user experience with default TUI